(function() {
  var ScriptOptions;

  ScriptOptions = require('../lib/script-options');

  describe('ScriptOptions', function() {
    beforeEach(function() {
      this.scriptOptions = new ScriptOptions();
      this.dummyEnv = {
        SCRIPT_CI: 'true',
        SCRIPT_ENV: 'test',
        _NUMBERS: '123'
      };
      return this.dummyEnvString = "SCRIPT_CI=true;SCRIPT_ENV='test';_NUMBERS=\"123\"";
    });
    describe('getEnv', function() {
      it('should default to an empty env object', function() {
        var env;
        env = this.scriptOptions.getEnv();
        return expect(env).toEqual({});
      });
      return it('should parse a custom user environment', function() {
        var env;
        this.scriptOptions.env = this.dummyEnvString;
        env = this.scriptOptions.getEnv();
        return expect(env).toEqual;
      });
    });
    return describe('mergedEnv', function() {
      it('should default to the orignal env object', function() {
        var mergedEnv;
        mergedEnv = this.scriptOptions.mergedEnv(this.dummyEnv);
        return expect(mergedEnv).toEqual(this.dummyEnv);
      });
      it('should retain the original environment', function() {
        var mergedEnv;
        this.scriptOptions.env = "TEST_VAR_1=one;TEST_VAR_2=\"two\";TEST_VAR_3='three'";
        mergedEnv = this.scriptOptions.mergedEnv(this.dummyEnv);
        expect(mergedEnv.SCRIPT_CI).toEqual('true');
        expect(mergedEnv.SCRIPT_ENV).toEqual('test');
        expect(mergedEnv._NUMBERS).toEqual('123');
        expect(mergedEnv.TEST_VAR_1).toEqual('one');
        expect(mergedEnv.TEST_VAR_2).toEqual('two');
        return expect(mergedEnv.TEST_VAR_3).toEqual('three');
      });
      return it('should support special character values', function() {
        var mergedEnv;
        this.scriptOptions.env = "TEST_VAR_1=o-n-e;TEST_VAR_2=\"nested\\\"doublequotes\\\"\";TEST_VAR_3='nested\\\'singlequotes\\\'';TEST_VAR_4='s p a c e s'";
        mergedEnv = this.scriptOptions.mergedEnv(this.dummyEnv);
        expect(mergedEnv.TEST_VAR_1).toEqual('o-n-e');
        expect(mergedEnv.TEST_VAR_2).toEqual("nested\\\"doublequotes\\\"");
        expect(mergedEnv.TEST_VAR_3).toEqual("nested\\\'singlequotes\\\'");
        return expect(mergedEnv.TEST_VAR_4).toEqual('s p a c e s');
      });
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL1VzZXJzL2FuYXMvLmF0b20vcGFja2FnZXMvc2NyaXB0L3NwZWMvc2NyaXB0LW9wdGlvbnMtc3BlYy5jb2ZmZWUiCiAgXSwKICAibmFtZXMiOiBbXSwKICAibWFwcGluZ3MiOiAiQUFBQTtBQUFBLE1BQUEsYUFBQTs7QUFBQSxFQUFBLGFBQUEsR0FBZ0IsT0FBQSxDQUFRLHVCQUFSLENBQWhCLENBQUE7O0FBQUEsRUFFQSxRQUFBLENBQVMsZUFBVCxFQUEwQixTQUFBLEdBQUE7QUFDeEIsSUFBQSxVQUFBLENBQVcsU0FBQSxHQUFBO0FBQ1QsTUFBQSxJQUFDLENBQUEsYUFBRCxHQUFxQixJQUFBLGFBQUEsQ0FBQSxDQUFyQixDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsUUFBRCxHQUNFO0FBQUEsUUFBQSxTQUFBLEVBQVcsTUFBWDtBQUFBLFFBQ0EsVUFBQSxFQUFZLE1BRFo7QUFBQSxRQUVBLFFBQUEsRUFBVSxLQUZWO09BRkYsQ0FBQTthQUtBLElBQUMsQ0FBQSxjQUFELEdBQWtCLG9EQU5UO0lBQUEsQ0FBWCxDQUFBLENBQUE7QUFBQSxJQVFBLFFBQUEsQ0FBUyxRQUFULEVBQW1CLFNBQUEsR0FBQTtBQUNqQixNQUFBLEVBQUEsQ0FBRyx1Q0FBSCxFQUE0QyxTQUFBLEdBQUE7QUFDMUMsWUFBQSxHQUFBO0FBQUEsUUFBQSxHQUFBLEdBQU0sSUFBQyxDQUFBLGFBQWEsQ0FBQyxNQUFmLENBQUEsQ0FBTixDQUFBO2VBQ0EsTUFBQSxDQUFPLEdBQVAsQ0FBVyxDQUFDLE9BQVosQ0FBb0IsRUFBcEIsRUFGMEM7TUFBQSxDQUE1QyxDQUFBLENBQUE7YUFJQSxFQUFBLENBQUcsd0NBQUgsRUFBNkMsU0FBQSxHQUFBO0FBQzNDLFlBQUEsR0FBQTtBQUFBLFFBQUEsSUFBQyxDQUFBLGFBQWEsQ0FBQyxHQUFmLEdBQXFCLElBQUMsQ0FBQSxjQUF0QixDQUFBO0FBQUEsUUFDQSxHQUFBLEdBQU0sSUFBQyxDQUFBLGFBQWEsQ0FBQyxNQUFmLENBQUEsQ0FETixDQUFBO2VBRUEsTUFBQSxDQUFPLEdBQVAsQ0FBVyxDQUFDLFFBSCtCO01BQUEsQ0FBN0MsRUFMaUI7SUFBQSxDQUFuQixDQVJBLENBQUE7V0FrQkEsUUFBQSxDQUFTLFdBQVQsRUFBc0IsU0FBQSxHQUFBO0FBQ3BCLE1BQUEsRUFBQSxDQUFHLDBDQUFILEVBQStDLFNBQUEsR0FBQTtBQUM3QyxZQUFBLFNBQUE7QUFBQSxRQUFBLFNBQUEsR0FBWSxJQUFDLENBQUEsYUFBYSxDQUFDLFNBQWYsQ0FBeUIsSUFBQyxDQUFBLFFBQTFCLENBQVosQ0FBQTtlQUNBLE1BQUEsQ0FBTyxTQUFQLENBQWlCLENBQUMsT0FBbEIsQ0FBMEIsSUFBQyxDQUFBLFFBQTNCLEVBRjZDO01BQUEsQ0FBL0MsQ0FBQSxDQUFBO0FBQUEsTUFJQSxFQUFBLENBQUcsd0NBQUgsRUFBNkMsU0FBQSxHQUFBO0FBQzNDLFlBQUEsU0FBQTtBQUFBLFFBQUEsSUFBQyxDQUFBLGFBQWEsQ0FBQyxHQUFmLEdBQXFCLHNEQUFyQixDQUFBO0FBQUEsUUFDQSxTQUFBLEdBQVksSUFBQyxDQUFBLGFBQWEsQ0FBQyxTQUFmLENBQXlCLElBQUMsQ0FBQSxRQUExQixDQURaLENBQUE7QUFBQSxRQUVBLE1BQUEsQ0FBTyxTQUFTLENBQUMsU0FBakIsQ0FBMkIsQ0FBQyxPQUE1QixDQUFvQyxNQUFwQyxDQUZBLENBQUE7QUFBQSxRQUdBLE1BQUEsQ0FBTyxTQUFTLENBQUMsVUFBakIsQ0FBNEIsQ0FBQyxPQUE3QixDQUFxQyxNQUFyQyxDQUhBLENBQUE7QUFBQSxRQUlBLE1BQUEsQ0FBTyxTQUFTLENBQUMsUUFBakIsQ0FBMEIsQ0FBQyxPQUEzQixDQUFtQyxLQUFuQyxDQUpBLENBQUE7QUFBQSxRQUtBLE1BQUEsQ0FBTyxTQUFTLENBQUMsVUFBakIsQ0FBNEIsQ0FBQyxPQUE3QixDQUFxQyxLQUFyQyxDQUxBLENBQUE7QUFBQSxRQU1BLE1BQUEsQ0FBTyxTQUFTLENBQUMsVUFBakIsQ0FBNEIsQ0FBQyxPQUE3QixDQUFxQyxLQUFyQyxDQU5BLENBQUE7ZUFPQSxNQUFBLENBQU8sU0FBUyxDQUFDLFVBQWpCLENBQTRCLENBQUMsT0FBN0IsQ0FBcUMsT0FBckMsRUFSMkM7TUFBQSxDQUE3QyxDQUpBLENBQUE7YUFjQSxFQUFBLENBQUcseUNBQUgsRUFBOEMsU0FBQSxHQUFBO0FBQzVDLFlBQUEsU0FBQTtBQUFBLFFBQUEsSUFBQyxDQUFBLGFBQWEsQ0FBQyxHQUFmLEdBQXFCLDZIQUFyQixDQUFBO0FBQUEsUUFDQSxTQUFBLEdBQVksSUFBQyxDQUFBLGFBQWEsQ0FBQyxTQUFmLENBQXlCLElBQUMsQ0FBQSxRQUExQixDQURaLENBQUE7QUFBQSxRQUVBLE1BQUEsQ0FBTyxTQUFTLENBQUMsVUFBakIsQ0FBNEIsQ0FBQyxPQUE3QixDQUFxQyxPQUFyQyxDQUZBLENBQUE7QUFBQSxRQUdBLE1BQUEsQ0FBTyxTQUFTLENBQUMsVUFBakIsQ0FBNEIsQ0FBQyxPQUE3QixDQUFxQyw0QkFBckMsQ0FIQSxDQUFBO0FBQUEsUUFJQSxNQUFBLENBQU8sU0FBUyxDQUFDLFVBQWpCLENBQTRCLENBQUMsT0FBN0IsQ0FBcUMsNEJBQXJDLENBSkEsQ0FBQTtlQUtBLE1BQUEsQ0FBTyxTQUFTLENBQUMsVUFBakIsQ0FBNEIsQ0FBQyxPQUE3QixDQUFxQyxhQUFyQyxFQU40QztNQUFBLENBQTlDLEVBZm9CO0lBQUEsQ0FBdEIsRUFuQndCO0VBQUEsQ0FBMUIsQ0FGQSxDQUFBO0FBQUEiCn0=

//# sourceURL=/Users/anas/.atom/packages/script/spec/script-options-spec.coffee
