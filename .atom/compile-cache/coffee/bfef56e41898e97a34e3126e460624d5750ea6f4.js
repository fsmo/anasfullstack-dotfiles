(function() {
  var $, PATH_REGEX, Point, fs, path;

  fs = require('fs');

  path = require('path');

  Point = require('atom').Point;

  $ = require('atom-space-pen-views').$;

  PATH_REGEX = /((?:\w:)?[^:\s\(\)]+):(\d+):(\d+)/g;

  module.exports.link = function(line) {
    if (line == null) {
      return null;
    }
    return line.replace(PATH_REGEX, '<a class="flink">$&</a>');
  };

  module.exports.attachClickHandler = function() {
    return $(document).on('click', '.flink', module.exports.clicked);
  };

  module.exports.removeClickHandler = function() {
    return $(document).off('click', '.flink', module.exports.clicked);
  };

  module.exports.clicked = function() {
    var extendedPath;
    extendedPath = this.innerHTML;
    return module.exports.open(extendedPath);
  };

  module.exports.open = function(extendedPath) {
    var col, filename, parts, row, _ref;
    parts = PATH_REGEX.exec(extendedPath);
    if (parts == null) {
      return;
    }
    _ref = parts.slice(1), filename = _ref[0], row = _ref[1], col = _ref[2];
    if (filename == null) {
      return;
    }
    if (!fs.existsSync(filename)) {
      alert("File not found: " + filename);
      return;
    }
    return atom.workspace.open(filename).then(function() {
      var editor, position;
      if (row == null) {
        return;
      }
      row = Math.max(row - 1, 0);
      col = Math.max(~~col - 1, 0);
      position = new Point(row, col);
      editor = atom.workspace.getActiveTextEditor();
      if (editor == null) {
        return;
      }
      editor.scrollToBufferPosition(position, {
        center: true
      });
      return editor.setCursorBufferPosition(position);
    });
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL1VzZXJzL2FuYXMvLmF0b20vcGFja2FnZXMvbW9jaGEtdGVzdC1ydW5uZXIvbGliL2NsaWNrYWJsZS1wYXRocy5jb2ZmZWUiCiAgXSwKICAibmFtZXMiOiBbXSwKICAibWFwcGluZ3MiOiAiQUFBQTtBQUFBLE1BQUEsOEJBQUE7O0FBQUEsRUFBQSxFQUFBLEdBQVUsT0FBQSxDQUFRLElBQVIsQ0FBVixDQUFBOztBQUFBLEVBQ0EsSUFBQSxHQUFVLE9BQUEsQ0FBUSxNQUFSLENBRFYsQ0FBQTs7QUFBQSxFQUVDLFFBQVMsT0FBQSxDQUFRLE1BQVIsRUFBVCxLQUZELENBQUE7O0FBQUEsRUFHQyxJQUFTLE9BQUEsQ0FBUSxzQkFBUixFQUFULENBSEQsQ0FBQTs7QUFBQSxFQUtBLFVBQUEsR0FBYSxvQ0FMYixDQUFBOztBQUFBLEVBT0EsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFmLEdBQXNCLFNBQUMsSUFBRCxHQUFBO0FBQ3BCLElBQUEsSUFBbUIsWUFBbkI7QUFBQSxhQUFPLElBQVAsQ0FBQTtLQUFBO1dBQ0EsSUFBSSxDQUFDLE9BQUwsQ0FBYSxVQUFiLEVBQXdCLHlCQUF4QixFQUZvQjtFQUFBLENBUHRCLENBQUE7O0FBQUEsRUFZQSxNQUFNLENBQUMsT0FBTyxDQUFDLGtCQUFmLEdBQW9DLFNBQUEsR0FBQTtXQUNsQyxDQUFBLENBQUUsUUFBRixDQUFXLENBQUMsRUFBWixDQUFlLE9BQWYsRUFBd0IsUUFBeEIsRUFBa0MsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFqRCxFQURrQztFQUFBLENBWnBDLENBQUE7O0FBQUEsRUFlQSxNQUFNLENBQUMsT0FBTyxDQUFDLGtCQUFmLEdBQW9DLFNBQUEsR0FBQTtXQUNsQyxDQUFBLENBQUUsUUFBRixDQUFXLENBQUMsR0FBWixDQUFnQixPQUFoQixFQUF5QixRQUF6QixFQUFtQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQWxELEVBRGtDO0VBQUEsQ0FmcEMsQ0FBQTs7QUFBQSxFQWtCQSxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQWYsR0FBeUIsU0FBQSxHQUFBO0FBQ3ZCLFFBQUEsWUFBQTtBQUFBLElBQUEsWUFBQSxHQUFlLElBQUksQ0FBQyxTQUFwQixDQUFBO1dBQ0EsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFmLENBQW9CLFlBQXBCLEVBRnVCO0VBQUEsQ0FsQnpCLENBQUE7O0FBQUEsRUF1QkEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFmLEdBQXNCLFNBQUMsWUFBRCxHQUFBO0FBQ3BCLFFBQUEsK0JBQUE7QUFBQSxJQUFBLEtBQUEsR0FBUSxVQUFVLENBQUMsSUFBWCxDQUFnQixZQUFoQixDQUFSLENBQUE7QUFDQSxJQUFBLElBQWMsYUFBZDtBQUFBLFlBQUEsQ0FBQTtLQURBO0FBQUEsSUFHQSxPQUFxQixLQUFLLENBQUMsS0FBTixDQUFZLENBQVosQ0FBckIsRUFBQyxrQkFBRCxFQUFVLGFBQVYsRUFBYyxhQUhkLENBQUE7QUFJQSxJQUFBLElBQWMsZ0JBQWQ7QUFBQSxZQUFBLENBQUE7S0FKQTtBQU1BLElBQUEsSUFBQSxDQUFBLEVBQVMsQ0FBQyxVQUFILENBQWMsUUFBZCxDQUFQO0FBQ0UsTUFBQSxLQUFBLENBQU8sa0JBQUEsR0FBa0IsUUFBekIsQ0FBQSxDQUFBO0FBQ0EsWUFBQSxDQUZGO0tBTkE7V0FVQSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQWYsQ0FBb0IsUUFBcEIsQ0FDQSxDQUFDLElBREQsQ0FDTSxTQUFBLEdBQUE7QUFDSixVQUFBLGdCQUFBO0FBQUEsTUFBQSxJQUFjLFdBQWQ7QUFBQSxjQUFBLENBQUE7T0FBQTtBQUFBLE1BR0EsR0FBQSxHQUFNLElBQUksQ0FBQyxHQUFMLENBQVMsR0FBQSxHQUFNLENBQWYsRUFBa0IsQ0FBbEIsQ0FITixDQUFBO0FBQUEsTUFJQSxHQUFBLEdBQU0sSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFBLENBQUMsR0FBRCxHQUFRLENBQWpCLEVBQW9CLENBQXBCLENBSk4sQ0FBQTtBQUFBLE1BS0EsUUFBQSxHQUFlLElBQUEsS0FBQSxDQUFNLEdBQU4sRUFBVyxHQUFYLENBTGYsQ0FBQTtBQUFBLE1BT0EsTUFBQSxHQUFTLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQWYsQ0FBQSxDQVBULENBQUE7QUFRQSxNQUFBLElBQWMsY0FBZDtBQUFBLGNBQUEsQ0FBQTtPQVJBO0FBQUEsTUFVQSxNQUFNLENBQUMsc0JBQVAsQ0FBOEIsUUFBOUIsRUFBd0M7QUFBQSxRQUFBLE1BQUEsRUFBTyxJQUFQO09BQXhDLENBVkEsQ0FBQTthQVdBLE1BQU0sQ0FBQyx1QkFBUCxDQUErQixRQUEvQixFQVpJO0lBQUEsQ0FETixFQVhvQjtFQUFBLENBdkJ0QixDQUFBO0FBQUEiCn0=

//# sourceURL=/Users/anas/.atom/packages/mocha-test-runner/lib/clickable-paths.coffee
